<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head th:replace="layout/layout :: head"></head>
<body>
	
	<!-- ============================================================== -->
    <!-- Main wrapper - style you can find in pages.scss -->
    <!-- ============================================================== -->
    <section id="wrapper">
   
    
        <style th:inline="text">
		    .login-background{
		        background-image: url([[@{/images/login.jpg}]]);
		    }
		</style>
    
        <div class="login-register login-background">

            <div class="login-box card">
                <div class="card-body">
                
                <img style="width: 220px" th:src="@{/images/sinmata.png}" />
                           
                <hr>
                
                <h3>[(#{txt.sistema.facturacion.electronica})]</h3>
                
                <div class="alert alert-warning alert-dismissible fade show" role="alert"  th:if="${param.error != null}">
				  <i class="fa fa-exclamation-triangle" aria-hidden="true"></i> 
			      <span th:text="#{txt.user.pw.fail}"></span>
				  <button type="button" class="close" data-dismiss="alert" aria-label="Close">
				    <span aria-hidden="true">&times;</span>
				  </button>
				</div>
				
				<div class="alert alert-warning alert-dismissible fade show" role="alert"  th:if="${param.expired != null}">
				  <i class="fa fa-exclamation-triangle" aria-hidden="true"></i> 
			      <span th:text="#{txt.session.expired}"></span>
				  <button type="button" class="close" data-dismiss="alert" aria-label="Close">
				    <span aria-hidden="true">&times;</span>
				  </button>
				</div>

                    <form class="form-horizontal form-material" id="loginform" autocomplete="off" th:action="@{/login}" method="post">
                        <h3 class="box-title" th:text="#{txt.iniciar.sesion}"></h3>
						
                        <div class="form-group ">
                            <div class="col-xs-12">
                                <input class="form-control" autofocus="autofocus" type="text" required="required"  id="username" name="username" th:placeholder="#{txt.username}"> </div>
                        </div>
                        <div class="form-group">
                            <div class="col-xs-12">
                                <input class="form-control" type="password" required="required" id="password" name="password" th:placeholder="#{txt.password}"> </div>
                        </div>
                        <div class="form-group text-center m-t-20">
                            <div class="col-xs-12">
                                <button class="btn btn-success btn-block text-uppercase waves-effect waves-light" type="submit">
                                	<i class="fas fa-sign-in-alt"></i> <span th:text="#{txt.ingresar}"></span>
                                </button>
                            </div>
                        </div>
                        <div class="form-group m-b-0">
                            <div class="col-sm-12 text-center">
                            	
                            	<div style="text-align: right;">
                            		<a href="javascript:void(0)" id="to-recover" class="text-dark pull-right">¿Olvido su contraseña?</a>
                                </div>
                            	
                                <div class="m-t-10">¿No tiene una cuenta? <a th:href="@{/nuevo-registro}" class="text-info m-l-5"><b>Puede registrarse aquí</b></a></div>
                            </div>
                        </div>
                    </form>
                    
                    <form autocomplete="off" class="form-horizontal" id="recoverform" th:action="@{/account/forgot}" method="post">
                        <div class="form-group ">
                            <div class="col-xs-12">
                            	<h3>Recuperar su contraseña</h3>
                                <input class="form-control" name="term" type="text" required="required" placeholder="Digite su correo electrónico o su usuario."> 
                            </div>
                        </div>
                        <div class="form-group text-center m-t-20">
                            <div class="col-xs-12">
                                <button class="btn btn-primary btn-block text-uppercase waves-effect waves-light" type="submit">
                                	<i class="fas fa-redo-alt"></i> Resetear contraseña
                                </button>
                                <a th:href="@{/login}" class="btn btn-success btn-block text-uppercase waves-effect waves-light color-blanco">
                                	<i class="fas fa-sign-in-alt"></i> Ingresar al sistema
                                </a>
                            </div>
                        </div>
                    </form>
                    
                    
                    
                </div>
            </div>
        </div>
    </section> 
    <!-- ============================================================== -->
    <!-- End Wrapper -->
    <!-- ============================================================== -->
    <div th:replace="layout/layout :: scripts"></div>
    <script type="text/javascript">
    function loadingShow(){
		$("#btnProcesando").show();
	}
	
	function loadingHide(){
		$("#btnProcesando").hide();
	}
    $(function() {
        "use strict";
        $(function() {
            $(".preloader").fadeOut();
        }), jQuery(document).on("click", ".mega-dropdown", function(i) {
            i.stopPropagation();
        });
        var i = function() {
            (window.innerWidth > 0 ? window.innerWidth : this.screen.width) < 1170 ? ($("body").addClass("mini-sidebar"), 
            $(".navbar-brand span").hide(), $(".scroll-sidebar, .slimScrollDiv").css("overflow-x", "visible").parent().css("overflow", "visible"), 
            $(".sidebartoggler i").addClass("ti-menu")) : ($("body").removeClass("mini-sidebar"), 
            $(".navbar-brand span").show());
            var i = (window.innerHeight > 0 ? window.innerHeight : this.screen.height) - 1;
            (i -= 70) < 1 && (i = 1), i > 70 && $(".page-wrapper").css("min-height", i + "px");
        };
        $(window).ready(i), $(window).on("resize", i), $(".sidebartoggler").on("click", function() {
            $("body").hasClass("mini-sidebar") ? ($("body").trigger("resize"), $(".scroll-sidebar, .slimScrollDiv").css("overflow", "hidden").parent().css("overflow", "visible"), 
            $("body").removeClass("mini-sidebar"), $(".navbar-brand span").show()) : ($("body").trigger("resize"), 
            $(".scroll-sidebar, .slimScrollDiv").css("overflow-x", "visible").parent().css("overflow", "visible"), 
            $("body").addClass("mini-sidebar"), $(".navbar-brand span").hide());
        }), $(".fix-header .topbar").stick_in_parent({}), $(".nav-toggler").click(function() {
            $("body").toggleClass("show-sidebar"), $(".nav-toggler i").toggleClass("mdi mdi-menu"), 
            $(".nav-toggler i").addClass("mdi mdi-close");
        }), $(".search-box a, .search-box .app-search .srh-btn").on("click", function() {
            $(".app-search").toggle(200);
        }), $(".right-side-toggle").click(function() {
            $(".right-sidebar").slideDown(50), $(".right-sidebar").toggleClass("shw-rside");
        }), $(".floating-labels .form-control").on("focus blur", function(i) {
            $(this).parents(".form-group").toggleClass("focused", "focus" === i.type || this.value.length > 0);
        }).trigger("blur"), $(function() {
            for (var i = window.location, o = $("ul#sidebarnav a").filter(function() {
                return this.href == i;
            }).addClass("active").parent().addClass("active"); ;) {
                if (!o.is("li")) break;
                o = o.parent().addClass("in").parent().addClass("active");
            }
        }), $(function() {
            $('[data-toggle="tooltip"]').tooltip();
        }), $(function() {
            $('[data-toggle="popover"]').popover();
        }), $(function() {
            $("#sidebarnav").metisMenu();
        }), $(".scroll-sidebar").slimScroll({
            position: "left",
            size: "5px",
            height: "100%",
            color: "#dcdcdc"
        }), $(".message-center").slimScroll({
            position: "right",
            size: "5px",
            color: "#dcdcdc"
        }), $(".aboutscroll").slimScroll({
            position: "right",
            size: "5px",
            height: "80",
            color: "#dcdcdc"
        }), $(".message-scroll").slimScroll({
            position: "right",
            size: "5px",
            height: "570",
            color: "#dcdcdc"
        }), $(".chat-box").slimScroll({
            position: "right",
            size: "5px",
            height: "470",
            color: "#dcdcdc"
        }), $(".slimscrollright").slimScroll({
            height: "100%",
            position: "right",
            size: "5px",
            color: "#dcdcdc"
        }), $("body").trigger("resize"), $(".list-task li label").click(function() {
            $(this).toggleClass("task-done");
        }), $("#to-recover").on("click", function() {
            $("#loginform").slideUp(), $("#recoverform").fadeIn();
        }), $('a[data-action="collapse"]').on("click", function(i) {
            i.preventDefault(), $(this).closest(".card").find('[data-action="collapse"] i').toggleClass("ti-minus ti-plus"), 
            $(this).closest(".card").children(".card-body").collapse("toggle");
        }), $('a[data-action="expand"]').on("click", function(i) {
            i.preventDefault(), $(this).closest(".card").find('[data-action="expand"] i').toggleClass("mdi-arrow-expand mdi-arrow-compress"), 
            $(this).closest(".card").toggleClass("card-fullscreen");
        }), $('a[data-action="close"]').on("click", function() {
            $(this).closest(".card").removeClass().slideUp("fast");
        });
        
        $("#recoverform").submit(function( e ) {
        	
        	e.preventDefault();
        	
        	  $.ajax({
                type: "POST",
                cache: false,
                beforeSend: function () {
              	  loadingShow();
                },
                url: "[(@{/account/forgot})]",
                data: $(this).serialize(),
                success: function (data)
                {
                	if(parseInt(data.response) === 1){
                		
                		swal("",data.msj,"success");
                		
                	}   
                	
                }, complete: function () {
                    loadingHide();
                }, error: function (x, t, m) {
                    if (t === "timeout") {
                        
                    } else {
                        
                    }
                }
            });
        });
        
    });
   
    </script>

</body>
</html>